name: AIB Create Image
on: workflow_dispatch
#on: push

env:
  AZURE_HOSTPOOL_NAME: "hp-wvd"                  # set this to the WVD Hostpool name to add the instances
  AZURE_NUMBER_OF_INSTANCES: 0                   # set this to the number of instances to add to the WVD Hostpool

jobs:
  build:
    name: Azure Image Builder
    runs-on: windows-latest
    steps:
    ## Checkout your GitHub Workspace
    - name: Checkout
      uses: actions/checkout@v1
    
    # Authentication: log on to Azure with the AZURE_CREDENTIALS secret
    - name: Login via Az module
      uses: azure/login@v1
      with:
        creds: ${{secrets.AZURE_CREDENTIALS}}
        enable-AzPSSession: true 
    
    # Run an inline PowerShell script    
    - name: Run Azure PowerShell script (inline)
      uses: azure/powershell@v1
      with:
        inlineScript: |
          Write-Output "Hello AIB world :-)"
        azPSVersion: 'latest'